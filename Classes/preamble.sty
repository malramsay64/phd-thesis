% This package imports my standard packages and defines
% macros that I use.

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{preamble}

% This defines all the packages needed for pandoc
\RequirePackage{pandoc}

% This is the package with defines syntax highlighting
\RequirePackage{mysyntax}

%%
%% Packages required for thesis
%%
%% These are packages which I am using within a document, calling their
%% provided commands explicitly.
%%

% Formatting of numbers and units
\RequirePackage{siunitx}

%%
%% Bibliography
%%

% This uses biblatex with the biber backend for the
% bibliography. The options are trying to keep the
% bibliography fairly compact, removing unnecessary
% details.
\RequirePackage[%
    backend=biber,
    style=nature,
    autocite=superscript,
    url=true,
    doi=false,
    isbn=false,
    eprint=false]{biblatex}

% Bibliography Settings
\DeclareFieldFormat{url}{\url{#1}}
\AtEveryBibitem{\clearlist{language}} % clears language
\AtEveryBibitem{\clearlist{series}\clearfield{month}\clearfield{note}\clearfield{issue}} % clear series


%%
%% Hyperref configuration
%%

\hypersetup{
  pdfborder=true,           % Use an underlined border for links
  pdfborderstyle={/S/U/W 1},
  colorlinks=false,
  linkcolor=blue,
  citecolor=blue,
  filecolor=blue,
  urlcolor=blue,
}

%%
%% Font configuration
%%

% Use the OpenSans font
\IfFontExistsTF{OpenSans}{%
  \setmainfont{OpenSans}[Scale=MatchLowercase]
}{%
  \RequirePackage{opensans}
}
\renewcommand{\familydefault}{\sfdefault}

%
% Configure numbering of sections
%
% 1 => Chapter
% 2 => Section
% 3 => Subsection
% 4 => Subsubsection

% This sets the numbering of titles to the specified depth
\setcounter{secnumdepth}{4}

% This is the depth for the table of contents
\setcounter{tocdepth}{3}

% Add date (or version) on right of page
\RequirePackage{fancyhdr}
\makeatletter
\fancypagestyle{headings}{%
  \fancyhead[LE,RO]{\textsl{\rightmark}}
  \fancyhead[LO,RE]{\textsl{\leftmark}}
  \fancyfoot[C]{\thepage}
  \fancyfoot[LE,RO]{\@date}%
}
\makeatother

% Defining Mathematical Terms
\newcommand{\vect}[1]{\ensuremath{\mathbf{#1}}}

% Shortcuts for partial differential equations
\renewcommand*{\d}[1]{\ensuremath{d #1}}
\newcommand*{\pd}[1]{\ensuremath{\partial #1}}
\newcommand*{\dd}[1]{\ensuremath{d^2 #1}}
\newcommand*{\pdd}[1]{\ensuremath{\partial^2 #1}}

\newcommand*{\ddiff}[2]{\ensuremath{\frac{\d #1}{\d #2}}}
\newcommand*{\pddiff}[2]{\ensuremath{\frac{\pd #1}{\pd #2}}}
\newcommand*{\dddiff}[2]{\ensuremath{\frac{\dd #1}{\d #2^2}}}
\newcommand*{\pdddiff}[2]{\ensuremath{\frac{\pdd #1}{\pd #2^2}}}

 % Defining Poise as a unit
\sisetup{qualifier-mode = subscript}
\DeclareSIUnit[number-unit-product = \,]{\poise}{P}

% Shortcuts for units
\DeclareSIQualifier{\melting}{m}
\DeclareSIQualifier{\glass}{g}
\DeclareSIQualifier{\kauzmann}{k}
\DeclareSIUnit[number-unit-product = \,]{\T}{T}
\DeclareSIUnit[number-unit-product = \,]{\Tg}{\T\glass}
\DeclareSIUnit[number-unit-product = \,]{\Tm}{\T\melting}
\DeclareSIUnit[number-unit-product = \,]{\Tk}{\T\kauzmann}

% Helper for defining functions
\RequirePackage{xspace}
\newcommand*{\e}{\ensuremath{\text{e}}\xspace}
\newcommand*{\boltzman}{\ensuremath{k_\text{B}}}

% Figures appear in section referencing them
% Place figure in specific location, ensure is in the correct Chapter.
\RequirePackage{placeins}
\let\Oldsection\section
\renewcommand{\section}{\FloatBarrier\Oldsection}

% Changing style of footnote
\renewcommand{\thefootnote}{\fnsymbol{footnote}}
